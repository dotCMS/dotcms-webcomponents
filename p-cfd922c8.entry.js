import{r as i,c as e,h as t,H as s,g as l}from"./p-ca5d1561.js";import{D as n}from"./p-89c3c2b6.js";import{h as r,j as h,i as o,l as a,k as d}from"./p-3163a9f0.js";const p=class{constructor(t){i(this,t),this.delete=e(this,"delete",7),this.fileName="",this.previewUrl="",this.deleteLabel="Delete"}render(){return this.fileName?t(s,null,this.getPreviewElement(),t("div",{class:"dot-file-preview__info"},t("span",{class:"dot-file-preview__name"},this.fileName),t("button",{type:"button",onClick:()=>this.clearFile()},this.deleteLabel))):null}clearFile(){this.delete.emit(),this.fileName=null,this.previewUrl=null}getPreviewElement(){return this.previewUrl?t("img",{alt:this.fileName,src:this.previewUrl}):t("div",{class:"dot-file-preview__extension"},t("span",null,this.getExtention()))}getExtention(){return this.fileName.substr(this.fileName.lastIndexOf("."))}get el(){return l(this)}};p.style="dot-binary-file-preview{display:-ms-flexbox;display:flex}dot-binary-file-preview img,dot-binary-file-preview .dot-file-preview__extension{width:100px;height:100px}dot-binary-file-preview .dot-file-preview__info{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-item-align:end;align-self:flex-end;padding-left:0.5rem}dot-binary-file-preview .dot-file-preview__info span{margin-bottom:1rem;word-break:break-all}dot-binary-file-preview .dot-file-preview__info button{-ms-flex-item-align:start;align-self:flex-start;background-color:lightgray;border:0;padding:0.3rem 1.5rem;cursor:pointer}dot-binary-file-preview .dot-file-preview__extension{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;background-color:lightgray}dot-binary-file-preview .dot-file-preview__extension span{overflow:hidden;padding:0.5rem;text-overflow:ellipsis;font-size:2rem}";const f=class{constructor(t){i(this,t),this.fileChange=e(this,"fileChange",7),this.lostFocus=e(this,"lostFocus",7),this.value=null,this.hint="",this.placeholder="",this.required=!1,this.disabled=!1}render(){return t(s,null,t("input",{type:"text","aria-describedby":r(this.hint),class:h(this.isValid()),disabled:this.disabled,placeholder:this.placeholder,value:this.value,onBlur:()=>this.lostFocus.emit(),onKeyDown:i=>this.keyDownHandler(i),onPaste:i=>this.pasteHandler(i)}))}keyDownHandler(i){"Backspace"===i.key?this.handleBackspace():this.shouldPreventEvent(i)&&i.preventDefault()}shouldPreventEvent(i){return!(i.ctrlKey||i.metaKey)}handleBackspace(){this.value="",this.emitFile(null,this.required?n.REQUIRED:null)}pasteHandler(i){i.preventDefault(),this.value="";const e=i.clipboardData;e.items.length&&(this.isPastingFile(e)?this.handleFilePaste(e.items):this.handleURLPaste(e.items[0]))}handleFilePaste(i){const e=i[1].getAsFile();o(e.name,e.type,this.accept)?(this.value=e,this.emitFile(e)):this.emitFile(null,n.INVALID)}handleURLPaste(i){i.getAsString(i=>{a(i)?(this.value=i,this.emitFile(i)):this.emitFile(null,n.URLINVALID)})}isPastingFile(i){return!!i.files.length}isValid(){return!(this.required&&this.value)}emitFile(i,e){this.fileChange.emit({file:i,errorType:e})}get el(){return l(this)}};f.style="";const c=class{constructor(t){i(this,t),this.fileChange=e(this,"fileChange",7),this.name="",this.required=!1,this.disabled=!1,this.buttonLabel=""}componentDidLoad(){this.fileInput=this.el.querySelector("dot-label input")}render(){return t(s,null,t("input",{accept:this.accept,disabled:this.disabled,id:d(this.name),onChange:i=>this.fileChangeHandler(i),required:this.required||null,type:"file"}),t("button",{type:"button",disabled:this.disabled,onClick:()=>{this.fileInput.click()}},this.buttonLabel))}fileChangeHandler(i){const e=this.fileInput.files[0];o(e.name,e.type,this.accept)?this.emitFile(e):(i.preventDefault(),this.emitFile(null,n.INVALID))}emitFile(i,e){this.fileChange.emit({file:i,errorType:e})}get el(){return l(this)}};c.style="";export{p as dot_binary_file_preview,f as dot_binary_text_field,c as dot_binary_upload_button}