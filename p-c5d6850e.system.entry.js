var __awaiter=this&&this.__awaiter||function(e,t,i,a){function r(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,s){function n(e){try{l(a.next(e))}catch(t){s(t)}}function o(e){try{l(a["throw"](e))}catch(t){s(t)}}function l(e){e.done?i(e.value):r(e.value).then(n,o)}l((a=a.apply(e,t||[])).next())}))};var __generator=this&&this.__generator||function(e,t){var i={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},a,r,s,n;return n={next:o(0),throw:o(1),return:o(2)},typeof Symbol==="function"&&(n[Symbol.iterator]=function(){return this}),n;function o(e){return function(t){return l([e,t])}}function l(n){if(a)throw new TypeError("Generator is already executing.");while(i)try{if(a=1,r&&(s=n[0]&2?r["return"]:n[0]?r["throw"]||((s=r["return"])&&s.call(r),0):r.next)&&!(s=s.call(r,n[1])).done)return s;if(r=0,s)n=[n[0]&2,s.value];switch(n[0]){case 0:case 1:s=n;break;case 4:i.label++;return{value:n[1],done:false};case 5:i.label++;r=n[1];n=[0];continue;case 7:n=i.ops.pop();i.trys.pop();continue;default:if(!(s=i.trys,s=s.length>0&&s[s.length-1])&&(n[0]===6||n[0]===2)){i=0;continue}if(n[0]===3&&(!s||n[1]>s[0]&&n[1]<s[3])){i.label=n[1];break}if(n[0]===6&&i.label<s[1]){i.label=s[1];s=n;break}if(s&&i.label<s[2]){i.label=s[2];i.ops.push(n);break}if(s[2])i.ops.pop();i.trys.pop();continue}n=t.call(e,i)}catch(o){n=[6,o];r=0}finally{a=s=0}if(n[0]&5)throw n[1];return{value:n[0]?n[1]:void 0,done:true}}};System.register(["./p-79716aa9.system.js","./p-3e0a44f2.system.js","./p-526ef7ac.system.js","./p-afaca460.system.js","./p-ede1966e.system.js"],(function(e){"use strict";var t,i,a,r,s,n,o,l,h,u,d,p,c,f,y,g;return{setters:[function(e){t=e.r;i=e.c;a=e.h;r=e.H;s=e.g},function(e){n=e.D},function(e){o=e.g;l=e.n;h=e.a;u=e.b;d=e.c;p=e.u;c=e.i},function(e){f=e.c},function(e){y=e.g;g=e.s}],execute:function(){var b="dot-binary-file.dot-dragover input{background-color:#f1f1f1}dot-binary-file .dot-binary__container input,dot-binary-file .dot-binary__container button{display:-ms-inline-flexbox;display:inline-flex;border:1px solid lightgray;padding:15px;border-radius:0}dot-binary-file .dot-binary__container input[type=file]{display:none}dot-binary-file .dot-binary__container input{min-width:245px;text-overflow:ellipsis}dot-binary-file .dot-binary__container button{background-color:lightgray}";var v=e("dot_binary_file",function(){function e(e){t(this,e);this.dotValueChange=i(this,"dotValueChange",7);this.dotStatusChange=i(this,"dotStatusChange",7);this.name="";this.label="";this.placeholder="Drop or paste a file or url";this.hint="";this.required=false;this.requiredMessage="This field is required";this.validationMessage="The field doesn't comply with the specified format";this.URLValidationMessage="The specified URL is not valid";this.disabled=false;this.accept="";this.maxFileLength="";this.buttonLabel="Browse";this.errorMessage="";this.previewImageName="";this.previewImageUrl="";this.file=null;this.allowedFileTypes=[];this.errorMessageMap=new Map}e.prototype.reset=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(e){this.file="";this.binaryTextField.value="";this.errorMessage="";this.clearPreviewData();this.status=o(this.isValid());this.emitStatusChange();this.emitValueChange();return[2]}))}))};e.prototype.clearValue=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(e){this.binaryTextField.value="";this.errorType=this.required?n.REQUIRED:null;this.setValue();this.clearPreviewData();return[2]}))}))};e.prototype.componentWillLoad=function(){this.setErrorMessageMap();this.validateProps();this.status=o(this.isValid());this.emitStatusChange()};e.prototype.componentDidLoad=function(){var e=this;this.binaryTextField=this.el.querySelector("dot-binary-text-field");var t=["dottype"];var i=this.el.querySelector('input[type="file"]');setTimeout((function(){var a=y(Array.from(e.el.attributes),t);g(i,a)}),0)};e.prototype.requiredMessageWatch=function(){this.errorMessageMap.set(n.REQUIRED,this.requiredMessage)};e.prototype.validationMessageWatch=function(){this.errorMessageMap.set(n.INVALID,this.validationMessage)};e.prototype.URLValidationMessageWatch=function(){this.errorMessageMap.set(n.URLINVALID,this.URLValidationMessage)};e.prototype.optionsWatch=function(){this.accept=f(this,"accept");var e;if(this.accept){e=this.accept.split(",");if(e.length===0){e=[this.accept]}}this.allowedFileTypes=e?e.map((function(e){return e.trim()})):[]};e.prototype.fileChangeHandler=function(e){e.stopImmediatePropagation();var t=e.detail;this.errorType=t.errorType;this.setValue(t.file);if(this.isBinaryUploadButtonEvent(e.target)&&t.file){this.binaryTextField.value=t.file.name}};e.prototype.HandleDragover=function(e){e.preventDefault();if(!this.disabled){this.el.classList.add("dot-dragover");this.el.classList.remove("dot-dropped")}};e.prototype.HandleDragleave=function(e){e.preventDefault();this.el.classList.remove("dot-dragover");this.el.classList.remove("dot-dropped")};e.prototype.HandleDrop=function(e){e.preventDefault();this.el.classList.remove("dot-dragover");if(!this.disabled&&!this.previewImageName){this.el.classList.add("dot-dropped");this.errorType=null;var t=e.dataTransfer.files[0];this.handleDroppedFile(t)}};e.prototype.handleDelete=function(e){var t=this;e.preventDefault();this.clearPreviewData();l((function(){if(!t.binaryTextField){t.binaryTextField=t.el.querySelector("dot-binary-text-field");console.log(t.binaryTextField)}t.setValue()}))};e.prototype.render=function(){var e=h(this.status,this.isValid(),this.required);return a(r,{class:Object.assign({},e)},a("dot-label",{label:this.label,required:this.required,name:this.name,tabindex:"0"},this.previewImageName?a("dot-binary-file-preview",{onClick:function(e){e.preventDefault()},fileName:this.previewImageName,previewUrl:this.previewImageUrl}):a("div",{class:"dot-binary__container"},a("dot-binary-text-field",{placeholder:this.placeholder,required:this.required,disabled:this.disabled,accept:this.allowedFileTypes.join(","),hint:this.hint,onLostFocus:this.lostFocusEventHandler.bind(this)}),a("dot-binary-upload-button",{name:this.name,accept:this.allowedFileTypes.join(","),disabled:this.disabled,required:this.required,buttonLabel:this.buttonLabel}))),d(this.hint),u(this.shouldShowErrorMessage(),this.getErrorMessage()),a("dot-error-message",null,this.errorMessage))};e.prototype.lostFocusEventHandler=function(){if(!this.status.dotTouched){this.status=p(this.status,{dotTouched:true});this.emitStatusChange()}};e.prototype.isBinaryUploadButtonEvent=function(e){return e.localName==="dot-binary-upload-button"};e.prototype.validateProps=function(){this.optionsWatch();this.setPlaceHolder()};e.prototype.shouldShowErrorMessage=function(){return this.getErrorMessage()&&!this.status.dotPristine};e.prototype.getErrorMessage=function(){return this.errorMessageMap.get(this.errorType)};e.prototype.isValid=function(){return!(this.required&&!this.file)};e.prototype.setErrorMessageMap=function(){this.requiredMessageWatch();this.validationMessageWatch();this.URLValidationMessageWatch()};e.prototype.setValue=function(e){if(e===void 0){e=null}try{this.file=e;this.status=p(this.status,{dotTouched:true,dotPristine:false,dotValid:this.isValid()});this.binaryTextField.value=e===null?"":this.binaryTextField.value}catch(t){console.warn(t)}this.emitValueChange();this.emitStatusChange()};e.prototype.emitStatusChange=function(){this.dotStatusChange.emit({name:this.name,status:this.status})};e.prototype.emitValueChange=function(){this.dotValueChange.emit({name:this.name,value:this.file})};e.prototype.handleDroppedFile=function(e){if(c(e.name,e.type,this.allowedFileTypes.join(","))){this.setValue(e);this.binaryTextField.value=e.name}else{this.errorType=n.INVALID;this.setValue()}};e.prototype.setPlaceHolder=function(){var e="Drop a file or url";this.placeholder=this.isWindowsOS()?e:this.placeholder};e.prototype.isWindowsOS=function(){return window.navigator.platform.includes("Win")};e.prototype.clearPreviewData=function(){this.previewImageUrl="";this.previewImageName=""};Object.defineProperty(e.prototype,"el",{get:function(){return s(this)},enumerable:false,configurable:true});Object.defineProperty(e,"watchers",{get:function(){return{requiredMessage:["requiredMessageWatch"],validationMessage:["validationMessageWatch"],URLValidationMessage:["URLValidationMessageWatch"],accept:["optionsWatch"]}},enumerable:false,configurable:true});return e}());v.style=b}}}));