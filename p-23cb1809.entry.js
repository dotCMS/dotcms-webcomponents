import{r as t,c as s,h as i,H as h,g as e}from"./p-ca5d1561.js";import{f as a,g as l,a as r,b as d,c as o,h as u,u as n,d as c}from"./p-3163a9f0.js";import{c as b}from"./p-a2039f2e.js";const m=({label:t,value:s})=>({key:t,value:s}),g=class{constructor(i){t(this,i),this.dotValueChange=s(this,"dotValueChange",7),this.dotStatusChange=s(this,"dotStatusChange",7),this.value="",this.name="",this.label="",this.hint="",this.required=!1,this.requiredMessage="This field is required",this.disabled=!1,this.items=[]}valueWatch(){this.value=b(this,"value","string"),this.items=a(this.value).map(m)}async reset(){this.items=[],this.value="",this.status=l(this.isValid()),this.emitChanges()}deleteItemHandler(t){t.stopImmediatePropagation(),this.items=this.items.filter((s,i)=>i!==t.detail),this.refreshStatus(),this.emitChanges()}addItemHandler({detail:t}){this.items=[...this.items,t],this.refreshStatus(),this.emitChanges()}componentWillLoad(){this.validateProps(),this.setOriginalStatus(),this.emitStatusChange()}render(){const t=r(this.status,this.isValid(),this.required);return i(h,{class:Object.assign({},t)},i("dot-label",{"aria-describedby":u(this.hint),tabIndex:this.hint?0:null,label:this.label,required:this.required,name:this.name},i("key-value-form",{onLostFocus:this.blurHandler.bind(this),"add-button-label":this.formAddButtonLabel,disabled:this.isDisabled(),"key-label":this.formKeyLabel,"key-placeholder":this.formKeyPlaceholder,"value-label":this.formValueLabel,"value-placeholder":this.formValuePlaceholder}),i("key-value-table",{onClick:t=>{t.preventDefault()},"button-label":this.listDeleteLabel,disabled:this.isDisabled(),items:this.items})),o(this.hint),d(this.showErrorMessage(),this.getErrorMessage()))}isDisabled(){return this.disabled||null}blurHandler(){this.status.dotTouched||(this.status=n(this.status,{dotTouched:!0}),this.emitStatusChange())}validateProps(){this.valueWatch()}setOriginalStatus(){this.status=l(this.isValid())}isValid(){return!(this.required&&!this.items.length)}showErrorMessage(){return this.getErrorMessage()&&!this.status.dotPristine}getErrorMessage(){return this.isValid()?"":this.requiredMessage}refreshStatus(){this.status=n(this.status,{dotTouched:!0,dotPristine:!1,dotValid:this.isValid()})}emitStatusChange(){this.dotStatusChange.emit({name:this.name,status:this.status})}emitValueChange(){const t=c(this.items);this.dotValueChange.emit({name:this.name,value:t})}emitChanges(){this.emitStatusChange(),this.emitValueChange()}get el(){return e(this)}static get watchers(){return{value:["valueWatch"]}}};g.style="";export{g as dot_key_value}