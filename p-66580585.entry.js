import{r as t,c as i,h as e,H as s,g as h}from"./p-ca5d1561.js";const a=(t,i)=>t&&t.length&&i&&"string"==typeof i?t.filter(({data:{inode:t}})=>i.split(",").includes(t)).map(({data:t})=>t):[],n=class{constructor(e){t(this,e),this.selected=i(this,"selected",7),this.cardClick=i(this,"cardClick",7),this.items=[],this.selection=[]}watchItems(t){this.selection=a(t,this.value)}watchValue(t){this.selection=a(this.items,t)}async getValue(){return this.selection}async clearValue(){this.value="",this.getCards().forEach(t=>{t.checked=!1})}componentDidLoad(){this.selection=a(this.items,this.value),this.cards=this.getCards()}clearMenu(){this.cards.forEach(t=>{t.hideMenu()})}render(){const t=(t=>t&&"string"==typeof t?t.split(","):[])(this.value);return e(s,null,this.items.map(i=>e("dot-card-contentlet",{onContextMenu:async t=>{t.preventDefault();const i=t.target;this.clearMenu(),i.showMenu(t.x,t.y)},onContextMenuClick:()=>{this.clearMenu()},onClick:()=>{this.clearMenu(),this.cardClick.emit(i.data)},key:i.data.inode,checked:t.includes(i.data.inode),onCheckboxChange:({detail:{originalTarget:t,shiftKey:e}})=>{let s=!1;e&&t.checked&&this.cards.forEach(i=>{i!==t&&i!==this.lastChecked||(s=!s),s&&(i.checked=!0,this.setValue(t,i.item.data))}),this.lastChecked=t,this.setValue(t,i.data)},item:i})))}setValue(t,i){t.checked?this.selection.push(i):this.selection=this.selection.filter(({identifier:t})=>t!==i.identifier),this.value=this.selection.map(({inode:t})=>t).join(","),this.selected.emit(this.selection)}getCards(){return this.el.shadowRoot.querySelectorAll("dot-card-contentlet")}get el(){return h(this)}static get watchers(){return{items:["watchItems"],value:["watchValue"]}}};n.style=':host{display:grid;grid-template-columns:repeat(auto-fill, minmax(260px, 1fr));grid-gap:var(--basic-padding-2)}dot-card-contentlet{height:100%}dot-card-contentlet:before{content:"";display:inline-block;-ms-flex:0 0 0px;flex:0 0 0;height:0;padding-bottom:calc(100%)}';export{n as dot_card_view}